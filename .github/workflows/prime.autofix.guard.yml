name: Reflex Autofix Guard
on:
  push:
    branches: [main]
    paths:
      - "scripts/**"
      - ".github/**"
jobs:
  safeguard:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Skip looped commits
      run: |
        AUTHOR=$(git log -1 --pretty=format:'%an')
        if [[ "$AUTHOR" == "ReflexBot" ]]; then
          echo "🔁 Skipping loop-triggered commit"
          exit 0
        fi
    - name: Mark successful scan
      run: echo "🛡️ Reflex autofix guard completed"
